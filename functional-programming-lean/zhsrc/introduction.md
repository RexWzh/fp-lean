Lean 是由 Microsoft Research 开发的交互式定理证明器，基于依赖类型理论。
依赖类型理论将程序和证明的世界融合在一起，因此 Lean 也是一种编程语言。
Lean 对其双重特性非常重视，并被设计为适用于通用编程语言，甚至 Lean 自身也是用 Lean 实现的。
本书讲解如何在 Lean 中编写程序。

从编程语言的角度来看，Lean 是一种具有依赖类型的严格纯函数式语言。
学习如何在 Lean 中编程的一大部分内容就是学习这些特性如何影响程序的编写方式，以及如何像一个函数式编程者思考问题。
"严格性" 意味着 Lean 中的函数调用与大多数语言中的函数调用方式类似：函数体开始运行之前，参数已经完全计算完毕。
"纯度" 意味着 Lean 程序不能产生副作用，比如修改内存位置、发送电子邮件或删除文件，除非程序的类型明确允许。
Lean 是一种"函数式"语言，这意味着函数是一等值，就像其他任何值一样，并且执行模型是受数学表达式求值启发的。
"依赖类型" 是 Lean 最不寻常的特性，它使得类型成为语言的一部分，并允许类型包含程序，程序计算类型。

本书旨在面向想要学习 Lean 的程序员，但并不要求他们之前使用过函数式编程语言。
不需要熟悉 Haskell、OCaml 或 F# 等函数式语言。
另一方面，本书假设读者已经了解循环、函数和数据结构等大多数编程语言中常见的概念。
虽然本书旨在成为关于函数式编程的良好入门书籍，但不适合作为一本关于编程的入门书。

作为定理证明助手使用 Lean 的数学家可能需要在某个时候编写自定义的证明自动化工具。
本书也适合他们。
随着这些工具变得越来越复杂，它们开始像函数式语言中的程序，但大多数工作的数学家接受的是像 Python 和 Mathematica 这样的语言培训。
本书可以帮助弥合这一差距，让更多的数学家能够编写易于维护和理解的证明自动化工具。

本书旨在按照线性顺序阅读，从开始到结束。
概念逐一引入，后面的章节假设读者已熟悉前面的章节。
有时，后面的章节会对前面只简要提及的主题进行深入讨论。
本书的某些章节包含练习题。为了巩固您对该章节的理解，值得完成这些练习。同时，在阅读本书的过程中，探索 Lean 并寻找创新的使用方式也是很有用的。

# 开始使用 Lean

在使用 Lean 编写和运行程序之前，您需要在自己的计算机上安装 Lean 工具链。Lean 的工具链包括以下几个部分：

 * `elan` ：类似于 `rustup` 或 `ghcup`，它负责管理 Lean 编译器的工具链。
 * `lake` ：类似于 `cargo`、`make` 或 Gradle，它用于构建 Lean 包及其依赖项。
 * `lean` ：用于对单个 Lean 文件进行类型检查和编译，同时为程序员工具提供关于当前正在编辑的文件的信息。通常，`lean` 是由其他工具调用而不是直接由用户调用的。
 * 针对编辑器的插件，例如 Visual Studio Code 或 Emacs，用于与 `lean` 进行通信并以方便的方式呈现其信息。

请参考[Lean 手册](https://leanprover.github.io/lean4/doc/quickstart.html)以获取最新的安装说明。

# 印刷样式约定

作为 Lean 的输入，提供给 Lean 的代码示例的格式如下：

```lean
{{#example_decl Examples/Intro.lean add1}}

{{#example_in Examples/Intro.lean add1_7}}
```

上面最后一行（以 `#eval` 开始）是一条命令，指示 Lean 计算一个答案。
Lean 的回复格式如下：

```output info
{{#example_out Examples/Intro.lean add1_7}}
```

Lean 返回的错误消息格式如下：

```lean
错误消息示例
```

```output error
{{#example_out Examples/Intro.lean add1_string}}
```

警告信息的格式如下：

```
警告信息内容
```

```output warning
declaration uses 'sorry'
```

# Unicode

习惯的 Lean 代码使用了一系列不属于 ASCII 的 Unicode 字符。
例如，希腊字母如 `α` 和 `β` 以及箭头 `→` 都出现在本书的第一章中。
这使得 Lean 代码更接近于普通的数学符号。

在默认的 Lean 设置下，Visual Studio Code 和 Emacs 都允许使用反斜杠(`\`)后跟名称来输入这些字符。
例如，要输入 `α`，可以键入 `\alpha`。
要在 Visual Studio Code 中查找如何输入字符，请将鼠标指向它并查看提示。
在 Emacs 中，在所问字符上使用 `C-c C-k`。