# 编程、证明和性能

本章讨论编程。
程序需要计算出正确的结果，但它们也需要高效地执行。
要编写高效的函数式程序，重要的是了解如何适当地使用数据结构以及如何思考运行程序所需的时间和空间。

本章还涉及证明。
对于在Lean中进行高效编程而言，最重要的数据结构之一是数组，但安全地使用数组需要证明数组索引在范围内。
此外，数组上的大多数有趣的算法不遵循结构递归的模式，而是在数组上进行迭代。
虽然这些算法是终止的，但Lean并不一定能自动检查这一点。
证明可以用来证明程序为什么会终止。

将程序重写以使其更快往往会导致代码更难理解。
证明还可以显示，即使使用不同的算法或实现技术，两个程序始终会计算出相同的答案。
这样，慢速、直接的程序可以作为快速、复杂版本的规范。

结合证明和编程可以使程序既安全又高效。
证明允许省略运行时边界检查，它们使得许多测试变得不必要，并且在不引入任何运行时性能开销的情况下，它们提供了对程序的极高信心水平。
然而，证明关于程序的定理可能耗时且昂贵，因此通常使用其他工具更经济。

交互式定理证明是一个深入的主题。
本章只提供一点导向Lean编程实践中遇到的证明的味道。
大多数有趣的定理与编程没有密切关系。
有关更多学习资源，请参阅[下一步](next-steps.md)。
然而，就像学习编程一样，学习写证明时，实践是最好的老师 —— 是时候开始了！